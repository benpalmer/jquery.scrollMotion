/**
 * jQuery scrollMotion -  stop motion animation with scroll event
 * Copyright (c) 20012 Ben Palmer hello(at)benpalmer(dot)info | http://www.benpalmer.info
 * Dual licensed under MIT and GPL.
 * Date: 03/04/2012
 * @author Ben Palmer
 * @version 1.1
 **/

;(function(a){var b={init:function(c){return this.each(function(){var d=a(this);var e=a.extend({top:a(window).scrollTop(),bottom:a(this).position().top,n:a(this).children().length,oneway:false,active:true,fadeIn:false},c);var f=(e.bottom-e.top)/e.n;e.breaks=[e.top];for(i=1;i<e.n;i++){e.breaks.push(Math.round(f*i)+e.top)}a(window).bind("scroll.scrollMotion",function(){var c=a(this).scrollTop();var f=b.detectBreak({top:c,settings:e,obj:d});if(e.oneway){console.log(f);if(f==e.n-1){e.active=false;b.setFrame({current:f,obj:d})}}if(e.active){b.setFrame({current:f,obj:d})}})})},detectBreak:function(a){var c=a.top,d=a.settings,e=a.obj,f;if(c<=d.top){f=0;if(d.fadeIn){e.css("opacity",0)}}else if(c>d.top&&c<d.bottom){if(d.fadeIn){var g=b.getPercent({top:c,settings:d});e.css("opacity",g)}for(var h in d.breaks){if(c>d.breaks[h]){f=h}}}else{f=d.breaks.length-1;if(d.fadeIn){e.css("opacity",1)}}return f},getPercent:function(a){var b=a.top,c=a.settings;var d=(b-c.top)/(c.bottom-c.top);return d},setFrame:function(b){var c=b.current;var d=b.obj;if(c!==null){d.children().each(function(){if(c==a(this).index()){a(this).show()}else{a(this).hide()}})}},destroy:function(){return this.each(function(){var b=a(this),c=b.data("scrollMotion");a(window).unbind(".scrollMotion");b.removeData("scrollMotion")})}};a.fn.scrollMotion=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof c==="object"||!c){return b.init.apply(this,arguments)}else{a.error("Method "+c+" does not exist on jQuery.scrollMotion")}}})(jQuery);